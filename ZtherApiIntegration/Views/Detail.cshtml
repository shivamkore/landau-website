@using ZtherApiIntegration.Models.Detail
@model DetailModel

<!-- load BazaarVoice Scripts -->
<script type="text/javascript" src="@System.Configuration.ConfigurationManager.AppSettings["bvpixel-js"].ToString()"></script>
<script type="text/javascript" src="@System.Configuration.ConfigurationManager.AppSettings["bvapi-js"].ToString()"></script>

<!-- schema.org Markup -->
<div itemscope itemtype="https://schema.org/Product"> 

<div id="detail_page">
    <div class="modal_overlay"></div>
    <div class="detail_modal">
        <div style="display:none" id="divCurrentProductCode">@Model.ProductDetail.Code</div>
        <div class="mobile_exit">
            <img src="public/images/detail/icons/x_close_white.png">

        </div>
        <img class="exit" src="public/images/detail/icons/x_close.png">

        <!-- Size Chart Partial -->
        @Html.Partial("~/Views/Partials/Detail/_SizeChartPartial.cshtml", Model)

    </div>
    <div class="detail_top">

        <!-- Detail Left Partial  -->
        @Html.Partial("~/Views/Partials/Detail/_DetailLeftPartial.cshtml")

        <!-- Detail Right Partial  -->
        @Html.Partial("~/Views/Partials/Detail/_DetailRightPartial.cshtml", Model)

    </div>

    <!-- Ratings and Reviews Container goes below product description -->
    <div id="BVRRContainer"></div>
    <script type="text/javascript">
        $BV.ui('rr', 'show_reviews', {
            doShowContent: function () {
                // If the container is hidden (such as behind a tab), put code here to make it visible
                //(open the tab).
            }
        });
    </script>

    <!-- Q&A code -->
    <div id="BVQAContainer"></div>
    <script type="text/javascript">
        $BV.ui('qa', 'show_questions', {
            doShowContent: function () {
                // If the container is hidden (such as behind a tab), put code here to make it visible
                //(open the tab).
            }
        });
    </script>

</div>

</div>

<!-- Modal Dialog Box Start -->
@{
    var url = System.Configuration.ConfigurationManager.AppSettings["Widget-Endpoint"];

    if (Model.SelectedColor.SwatchType != null && Model.SelectedColor.SwatchType.Equals("Print", StringComparison.InvariantCultureIgnoreCase))
    {
        url = string.Concat(url, Model.ProductDetail.Code, Model.SelectedColor.ColorCode);
    }
    else
    {
        url = string.Concat(url, Model.ProductDetail.Code);
    }
}

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">BUY NOW</h4>
            </div>
            <div class="modal-body">
                <div id="widget-container">
                    <iframe src="@url" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal Dialog Box End -->


<script src="public/js/logic/detail.js"></script>

<script type="text/javascript">
    setValues('@Model.ProductDetail.Code', '@Model.ProductDetail.DefaultColorCode', '@(Model.ColorsAndSizes.ProductCategorySizes.Count > 0 ? Model.ColorsAndSizes.ProductCategorySizes[0] : "")');
</script>

<script>
    fbq('track', 'ViewContent');
</script>

